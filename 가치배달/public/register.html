<!DOCTYPE html>
<html>
<head>
  <title>회원가입 페이지</title> <!-- 제목 -->
  <link rel="stylesheet" type="text/css" href="./css/register.css"> <!-- CSS 파일 링크 -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet"> <!-- 구글 폰트 링크 -->
</head>
<body>
  <h1>회원가입</h1> <!-- 제목 -->
  <form action="/register" method="post" onsubmit="event.preventDefault(); submitForm();">
    <label for="username">이름:</label> <!-- 이름 입력 필드 -->
    <input type="text" id="username" name="username" required><br>
    
    <label for="email">이메일:</label> <!-- 이메일 입력 필드 -->
    <input type="email" id="email" name="email" required><br>

    <label for="password">비밀번호:</label> <!-- 비밀번호 입력 필드 -->
    <input type="password" id="password" name="password" required><br>

    <label for="address">호수:</label> <!-- 주소 입력 필드 -->
    <input type="text" id="address" name="address" required><br>

    <button type="submit">가입</button> <!-- 제출 버튼 -->
  </form>

  <script>
    function submitForm() { // 폼 제출 함수
  const xhr = new XMLHttpRequest(); // XMLHttpRequest 객체 생성
  xhr.open('POST', '/register'); // POST 메서드로 '/register' URL에 요청
  xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded'); // 요청 헤더에 Content-Type 설정
  xhr.onload = function() { // 요청에 대한 콜백 함수
    if (xhr.status === 200) { // 성공적인 응답
      alert('가치배달 회원가입이 완료되었습니다!'); // 알림 메시지 출력
      location.href='./homepage.html'; // 홈페이지로 이동
    } else { // 실패한 응답
      alert('오류가 발생하였습니다.'); // 알림 메시지 출력
    }
  };
  const formData = new FormData(document.querySelector('form')); // 폼 데이터 객체 생성
  const data = new URLSearchParams(); // URLSearchParams 객체 생성
  for (const pair of formData.entries()) { // 폼 데이터를 반복하며 URLSearchParams에 추가
    data.append(pair[0], pair[1]);
  }
  xhr.send(data); // 요청 전송
}

  </script>
</body>
</html>
